<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rasheduzzaman | Live TV</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@1.4.0/dist/hls.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background-color: #0b1120; color: #e2e8f0; font-family: 'Segoe UI', sans-serif; }
        .sticky-section { position: sticky; top: 0; z-index: 1000; background: #0b1120; box-shadow: 0 10px 30px rgba(0,0,0,0.9); border-bottom: 1px solid #1e293b; }
        .video-container { position: relative; padding-bottom: 56.25%; background: black; border-bottom: 2px solid #fbbf24; }
        .video-container video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        .cat-btn { white-space: nowrap; padding: 8px 14px; border-radius: 6px; font-weight: 700; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px; transition: all 0.2s ease; border: 1px solid rgba(255,255,255,0.1); }
        .btn-active { background: #fbbf24; color: #000; border-color: #fbbf24; box-shadow: 0 0 10px rgba(251, 191, 36, 0.4); }
        .btn-inactive { background: #1e293b; color: #94a3b8; }
        .channel-card { background: #1e293b; cursor: pointer; transition: transform 0.2s; border: 1px solid transparent; }
        .channel-card:active { transform: scale(0.95); background: #334155; }
        .active-channel { background: #252f47; border-color: #fbbf24; }
        .active-channel h3 { color: #fbbf24; }
        .legal-text { font-size: 0.6rem; color: #475569; line-height: 1.4; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="flex flex-col min-h-screen">
    <a href="index.html" class="fixed bottom-6 right-6 z-[2000] bg-[#fbbf24] text-black w-12 h-12 rounded-full flex items-center justify-center shadow-lg active:scale-90 transition-transform">
        <i class="fas fa-home text-xl"></i>
    </a>
    <div class="sticky-section w-full max-w-3xl mx-auto">
        <div class="flex justify-between items-center px-4 py-3 bg-slate-900">
            <div class="flex flex-col">
                <h1 class="text-xl font-black text-[#fbbf24] tracking-wider uppercase leading-none">Rasheduzzaman</h1>
                <span class="text-[10px] text-slate-400 tracking-widest uppercase">Live Stream Player</span>
            </div>
            <div id="liveBadge" class="hidden px-2 py-0.5 bg-red-600 text-white text-[10px] font-bold rounded animate-pulse">LIVE</div>
        </div>
        <div class="video-container group">
            <video id="player" controls playsinline poster="https://via.placeholder.com/640x360/000000/fbbf24?text=Select+Channel"></video>
            <div id="videoLoader" class="hidden absolute inset-0 flex items-center justify-center bg-black/80 text-[#fbbf24] text-xs font-bold z-10">
                <i class="fas fa-circle-notch fa-spin mr-2"></i> BUFFERING...
            </div>
        </div>
        <div class="p-3 bg-slate-800 space-y-3">
            <div class="flex gap-2 overflow-x-auto pb-1 no-scrollbar">
                <button onclick="App.load('bd', this)" class="cat-btn btn-active">ðŸ‡§ðŸ‡© BD</button>
                <button onclick="App.load('in', this)" class="cat-btn btn-inactive">ðŸ‡®ðŸ‡³ India</button>
                <button onclick="App.load('cartoon', this)" class="cat-btn btn-inactive">ðŸ‘¶ Hindi Kids</button>
                <button onclick="App.load('sports', this)" class="cat-btn btn-inactive">âš½ Sports</button>
            </div>
            <div class="relative">
                <i class="fas fa-search absolute left-3 top-2.5 text-slate-500 text-xs"></i>
                <input type="text" id="searchInput" placeholder="Find Channel..." class="w-full bg-slate-900 border border-slate-700 rounded-lg py-2 pl-9 text-sm text-white outline-none focus:border-[#fbbf24] placeholder-slate-600">
            </div>
        </div>
    </div>
    <div class="flex-1 w-full max-w-3xl mx-auto p-2 pb-10">
        <div id="listStatus" class="text-center py-10 hidden">
            <i class="fas fa-sync fa-spin text-slate-500 mb-2"></i>
            <p class="text-xs text-slate-500 uppercase tracking-widest">Processing List...</p>
        </div>
        <div id="channelGrid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2"></div>
        <div class="mt-8 mb-4 border-t border-slate-800 pt-4 px-4 text-center">
            <p class="text-[10px] text-slate-400 font-bold mb-2">Developed by <span class="text-[#fbbf24]">Rafid Islam</span></p>
            <p class="legal-text">Disclaimer: content is streamed from publicly available GitHub repositories (iptv-org). We do not host or broadcast any content. This tool is for educational purposes only.<br>Source: GitHub Open Source Community.</p>
        </div>
    </div>
    <script>
        const App = {
            proxy: 'https://corsproxy.io/?',
            sources: { bd: 'https://iptv-org.github.io/iptv/countries/bd.m3u', in: 'https://iptv-org.github.io/iptv/countries/in.m3u', hindi: 'https://iptv-org.github.io/iptv/languages/hin.m3u' },
            data: [], hls: null,
            init() { this.video = document.getElementById('player'); this.grid = document.getElementById('channelGrid'); this.status = document.getElementById('listStatus'); document.getElementById('searchInput').addEventListener('input', (e) => this.render(e.target.value)); this.load('bd', document.querySelector('.cat-btn')); },
            async load(type, btn) { document.querySelectorAll('.cat-btn').forEach(b => { b.classList.remove('btn-active'); b.classList.add('btn-inactive'); }); if(btn) { btn.classList.remove('btn-inactive'); btn.classList.add('btn-active'); } this.grid.innerHTML = ''; this.status.classList.remove('hidden'); this.data = []; try { if (type === 'cartoon') { await this.fetchAndProcess(this.sources.hindi, 'kids'); } else if (type === 'sports') { const [bdData, inData] = await Promise.all([ fetch(this.proxy + encodeURIComponent(this.sources.bd)).then(r => r.text()), fetch(this.proxy + encodeURIComponent(this.sources.in)).then(r => r.text()) ]); this.parse(bdData + '\n' + inData, 'sports'); } else { await this.fetchAndProcess(this.sources[type]); } } catch (e) { this.status.innerHTML = `<span class="text-red-500">Error loading. Check Internet.</span>`; } },
            async fetchAndProcess(url, filterType = null) { const res = await fetch(this.proxy + encodeURIComponent(url)); const text = await res.text(); this.parse(text, filterType); },
            parse(text, filterType) { const lines = text.split('\n'); let item = {}; const seenUrls = new Set(); lines.forEach(line => { line = line.trim(); if(line.startsWith('#EXTINF:')) { const parts = line.split(','); item.name = parts[parts.length-1].trim(); const logo = line.match(/tvg-logo="([^"]*)"/); item.logo = logo ? logo[1] : null; const grp = line.match(/group-title="([^"]*)"/); item.group = grp ? grp[1] : 'General'; } else if(line.startsWith('http')) { item.url = line; if(item.name && item.url && !seenUrls.has(item.url)) { let shouldAdd = true; const n = item.name.toLowerCase(); const g = (item.group || '').toLowerCase(); if(filterType === 'kids') { const isKids = n.includes('cartoon') || n.includes('kid') || n.includes('disney') || n.includes('nick') || n.includes('pogo') || n.includes('sonic') || n.includes('anim') || n.includes('hungama') || n.includes('discovery kids'); if(!isKids && !g.includes('kid') && !g.includes('anim')) shouldAdd = false; } if(filterType === 'sports') { const isSport = n.includes('sport') || n.includes('cricket') || n.includes('football') || n.includes('soccer') || n.includes('premier') || n.includes('tsports') || n.includes('gtv') || n.includes('willow') || n.includes('astro'); if(!isSport && !g.includes('sport')) shouldAdd = false; } if(shouldAdd) { this.data.push({...item}); seenUrls.add(item.url); } } item = {}; } }); this.render(); this.status.classList.add('hidden'); },
            render(search = '') { const q = search.toLowerCase(); this.grid.innerHTML = ''; const frag = document.createDocumentFragment(); if(this.data.length === 0) { this.status.innerHTML = "No channels found."; this.status.classList.remove('hidden'); return; } this.data.forEach(ch => { if(ch.name.toLowerCase().includes(q)) { const div = document.createElement('div'); const logo = ch.logo || `https://via.placeholder.com/60x60/334155/fbbf24?text=${ch.name[0]}`; div.className = "channel-card p-2 rounded-lg flex items-center gap-3"; div.innerHTML = ` <img src="${logo}" class="w-10 h-10 object-contain bg-black/30 rounded p-0.5" loading="lazy" onerror="this.src='https://via.placeholder.com/40'"> <div class="overflow-hidden"> <h3 class="text-xs font-bold text-slate-200 truncate">${ch.name}</h3> <p class="text-[9px] text-slate-500 truncate uppercase tracking-wider">${ch.group}</p> </div> `; div.onclick = () => this.play(ch.url, div); frag.appendChild(div); } }); this.grid.appendChild(frag); },
            play(url, el) { document.querySelectorAll('.active-channel').forEach(e => e.classList.remove('active-channel')); if(el) el.classList.add('active-channel'); const badge = document.getElementById('liveBadge'); const loader = document.getElementById('videoLoader'); badge.classList.add('hidden'); loader.classList.remove('hidden'); if (this.video.canPlayType('application/vnd.apple.mpegurl')) { this.video.src = url; this.video.play().then(() => { badge.classList.remove('hidden'); loader.classList.add('hidden'); }).catch(e => { this.video.src = this.proxy + encodeURIComponent(url); this.video.play(); }); } else if (Hls.isSupported()) { if (this.hls) this.hls.destroy(); this.hls = new Hls(); this.hls.loadSource(this.proxy + encodeURIComponent(url)); this.hls.attachMedia(this.video); this.hls.on(Hls.Events.MANIFEST_PARSED, () => { this.video.play(); badge.classList.remove('hidden'); loader.classList.add('hidden'); }); } }
        };
        document.addEventListener('DOMContentLoaded', () => App.init());
    </script>
</body>
</html>
